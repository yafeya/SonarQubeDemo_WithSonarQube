#
# This file was generated by VS2CMake tool (internal-only)!
# You probably need to modify the generated files to meet your requirements.
#

cmake_minimum_required(VERSION 2.8)

IF(EXISTS "${PROJECT_SOURCE_DIR}/${PROJECT_NAME}.common.cmake")
    INCLUDE("${PROJECT_SOURCE_DIR}/${PROJECT_NAME}.common.cmake")
ENDIF()

INCLUDE("UnitTestConsole.cmake")

SET(LIBRARY_OUTPUT_PATH ${PROJECT_BINARY_DIR}/bin)

INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/./"
					"${CMAKE_CURRENT_SOURCE_DIR}/../TestSource"
					"${CMAKE_CURRENT_SOURCE_DIR}/../imports/googletest/googletest/include"
					"${CMAKE_CURRENT_SOURCE_DIR}/../imports/googletest/googletest"
        )

ADD_EXECUTABLE(${MY_TARGET_NAME}
            ${UnitTestConsole_SRC})

TARGET_LINK_LIBRARIES(${MY_TARGET_NAME} PRIVATE pthread rt dl)

#IF(BINARY_BITS EQUAL 64)   
    TARGET_LINK_LIBRARIES(${MY_TARGET_NAME} PRIVATE ${PROJECT_BINARY_DIR}/bin/libTestSource.so
										${PROJECT_BINARY_DIR}/bin/libGoogleTest.a
    )
#ENDIF()

TARGET_COMPILE_OPTIONS(${MY_TARGET_NAME} PRIVATE "-fpermissive")

IF(BINARY_BITS EQUAL 64)
    IF(CMAKE_BUILD_TYPE STREQUAL "Debug")
        TARGET_COMPILE_DEFINITIONS(${MY_TARGET_NAME} PRIVATE _CONSOLE )
    ENDIF()
    IF(CMAKE_BUILD_TYPE STREQUAL "Release")
        TARGET_COMPILE_DEFINITIONS(${MY_TARGET_NAME} PRIVATE _CONSOLE )
    ENDIF()
ENDIF()
IF(BINARY_BITS EQUAL 32)
    IF(CMAKE_BUILD_TYPE STREQUAL "Debug")
        TARGET_COMPILE_DEFINITIONS(${MY_TARGET_NAME} PRIVATE _CONSOLE )
    ENDIF()
    IF(CMAKE_BUILD_TYPE STREQUAL "Release")
        TARGET_COMPILE_DEFINITIONS(${MY_TARGET_NAME} PRIVATE _CONSOLE )
    ENDIF()
ENDIF()

ADD_DEPENDENCIES(${MY_TARGET_NAME} GoogleTest TestSource )

IF(BINARY_BITS EQUAL 64)
    IF(CMAKE_BUILD_TYPE STREQUAL "Debug")
        INSTALL(TARGETS ${MY_TARGET_NAME} RUNTIME DESTINATION ${PROJECT_SOURCE_DIR}/../build/x64/debug)
    ELSE()
        INSTALL(TARGETS ${MY_TARGET_NAME} RUNTIME DESTINATION ${PROJECT_SOURCE_DIR}/../build/x64/release)
    ENDIF()
ENDIF()
IF(BINARY_BITS EQUAL 32)
    IF(CMAKE_BUILD_TYPE STREQUAL "Debug")
        INSTALL(TARGETS ${MY_TARGET_NAME} RUNTIME DESTINATION ${PROJECT_SOURCE_DIR}/../build/x86/debug)
    ELSE()
        INSTALL(TARGETS ${MY_TARGET_NAME} RUNTIME DESTINATION ${PROJECT_SOURCE_DIR}/../build/x86/release)
    ENDIF()
ENDIF()
